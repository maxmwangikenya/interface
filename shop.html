<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Shop</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- owl stylesheets --> 
      <link rel="stylesheet" href="css/owl.carousel.min.css">
      <link rel="stylesheet" href="css/owl.theme.default.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   </head>
   <body>
      <!-- header section start -->
      <div class="header_section">
         <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
               <a class="logo" href="index.html"><img src="images/mylogo2.png"></a>
               <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
               </button>
               <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav mr-auto">
                     <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="shop.html">Shop</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact Us</a>
                     </li>
                  </ul>
                  
                  <form class="form-inline my-2 my-lg-0" href="#cart">
                     <div class="search_icon">
                        <ul>
                           <li><a href="#mycart" class=""><img src="images/icons8-cart-25.png"></a></li>
                           <li><a href="#"><img src="images/user-icon.png"></a></li>
                        </ul>
                     </div>
                  </form>
               </div>
         </nav>
         </div>
      </div>
      <!-- header section end -->
      <h2 class="text-center">Listed Accounts</h2>
      <div class="row">
         <div class="col">
            <div class="container">
               <div class="card dark">
                 <img src="images/biti11.png" class="card-img-top" alt="...">
                 <div class="card-body">
                   <div class="text-section">
                     <h5 class="card-title myaccount">Binance</h5>
                     <p class="card-text">Buy a Binance Account and get great offers</p>
                   </div>
                   <div class="cta-section">
                     <div class="mycharge">$129.00</div>
                     <a href="#" class="btn btn-light addtocart">Buy Now</a>
                   </div>
                 </div>
               </div>
            </div>
         </div>
         <div class="col">
            <div class="container">
               <div class="card dark">
                 <img src="images/biti11.png" class="card-img-top" alt="...">
                 <div class="card-body">
                   <div class="text-section">
                     <h5 class="card-title myaccount">Binance</h5>
                     <p class="card-text">Buy a Binance Account and get great offers</p>
                   </div>
                   <div class="cta-section">
                     <div class="mycharge">$129.00</div>
                     <a href="#" class="btn btn-light addtocart">Buy Now</a>
                   </div>
                 </div>
               </div>
            </div>
         </div>
         <div class="col">
            <div class="container">
               <div class="card dark">
                 <img src="images/biti11.png" class="card-img-top" alt="...">
                 <div class="card-body">
                   <div class="text-section">
                     <h5 class="card-title myaccount">Binance</h5>
                     <p class="card-text">Buy a Binance Account and get great offers</p>
                   </div>
                   <div class="cta-section">
                     <div class="mycharge">$129.00</div>
                     <a href="#" class="btn btn-light addtocart">Buy Now</a>
                   </div>
                 </div>
               </div>
            </div>
         </div>
      </div>
      <section class="container content-section" id="mycart">
         <h2 class="section-header">CART</h2>
         <div class="cart-row">
             <span class="cart-item cart-header cart-column">ITEM</span>
             <span class="cart-price cart-header cart-column">PRICE</span>
             <span class="cart-quantity cart-header cart-column">QUANTITY</span>
         </div>
         <div class="cart-items">
             
         </div>
         <div class="cart-total">
            <strong class="cart-total-title">Total</strong>
            <span class="cart-total-price">$0</span>
         </div>
         <button class="btn btn-primary btn-purchase" type="button">PURCHASE</button>
     </section>

      <!--  newsletter section start -->
      <!--  newsletter section end -->
      <!-- footer section start -->
      <div class="footer_section">
         <div class="container">
            <div class="footer_location_text">
               <ul>
                  <li><img src="images/map-icon.png"><span class="padding_left_10"><a href="#">Pronet Ventures</a></span></li>
                  <li><img src="images/call-icon.png"><span class="padding_left_10"><a href="#">Call : +25412345678</a></span></li>
                  <li><img src="images/mail-icon.png"><span class="padding_left_10"><a href="#">darkprone19@gmail.com</a></span></li>
               </ul>
            </div>
            <div class="row">
               <div class="col-lg-4 col-sm-6">
                  <h2 class="useful_text">Useful link </h2>
                  <div class="footer_menu">
                     <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                     </ul>
                  </div>
               </div>
               <div class="col-lg-4 col-sm-6">
                  <h2 class="useful_text">Provisio</h2>
                  <p class="lorem_text">Trading forex and equity may lead to losses </p>
               </div>
               <div class="col-lg-4 col-sm-6">
                  <h2 class="useful_text">Social Media</h2>
                  <div id="social">
                     <a class="facebookBtn smGlobalBtn active" href="#" ></a>
                     <a class="twitterBtn smGlobalBtn" href="#" ></a>
                     <a class="googleplusBtn smGlobalBtn" href="#" ></a>
                     <a class="linkedinBtn smGlobalBtn" href="#" ></a>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- footer section end -->
      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">2023 All Rights Reserved. Design by <a href="">Konkarah Deh</a></p>
         </div>
      </div>
      <!-- copyright section end -->
       <script>
            if (document.readyState == 'loading') {
               document.addEventListener('DOMContentLoaded', ready)
            } else {
               ready()
            }

            function ready() {
               var removeCartItemButtons = document.getElementsByClassName('btn-danger')
               for (var i = 0; i < removeCartItemButtons.length; i++) {
                  var button = removeCartItemButtons[i]
                  button.addEventListener('click', removeCartItem)
               }

               var quantityInputs = document.getElementsByClassName('cart-quantity-input')
               for (var i = 0; i < quantityInputs.length; i++) {
                  var input = quantityInputs[i]
                  input.addEventListener('change', quantityChanged)
               }

               var addToCartButtons = document.getElementsByClassName('addtocart')
               for (var i = 0; i < addToCartButtons.length; i++) {
                  var button = addToCartButtons[i]
                  button.addEventListener('click', addToCartClicked)
               }

               document.getElementsByClassName('btn-purchase')[0].addEventListener('click', purchaseClicked)
            }

            function purchaseClicked() {
               let mail = prompt('Please provide mail');
               var cartItems = document.getElementsByClassName('cart-items')[0]
               console.log(cartItems.childNodes)
               const accountType = document.getElementsByClassName('cart-item-title')[0].innerText
                  const amount= document.getElementsByClassName('cart-total-price')[0].innerText
                  fetch('http://localhost:3000/test', {
                     method: 'POST',
                     headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                     },
                     body: JSON.stringify({ "account":accountType, "amount": amount, "mail": mail  })
                  })
                     .then(response => response.json())
                     .then(response => console.log(JSON.stringify(response)))
               while (cartItems.hasChildNodes()) {
                  cartItems.removeChild(cartItems.firstChild)
               }
               alert('Thank you for your purchase. Please check mail for more details on this transaction')
               updateCartTotal()
            }

            function removeCartItem(event) {
               var buttonClicked = event.target
               buttonClicked.parentElement.parentElement.remove()
               updateCartTotal()
            }

            function quantityChanged(event) {
               var input = event.target
               if (isNaN(input.value) || input.value <= 0) {
                  input.value = 1
               }
               updateCartTotal()
            }

            function addToCartClicked(event) {
               var button = event.target
               var shopItem = button.parentElement.parentElement
               var title = shopItem.getElementsByClassName('myaccount')[0].innerText
               var price = shopItem.getElementsByClassName('mycharge')[0].innerText
               //var imageSrc = shopItem.getElementsByClassName('shop-item-image')[0].src
               addItemToCart(title, price)
               updateCartTotal()
            }

            function addItemToCart(title, price, imageSrc) {
               var cartRow = document.createElement('div')
               cartRow.classList.add('cart-row')
               var cartItems = document.getElementsByClassName('cart-items')[0]
               var cartItemNames = cartItems.getElementsByClassName('cart-item-title')
               for (var i = 0; i < cartItemNames.length; i++) {
                  if (cartItemNames[i].innerText == title) {
                        alert('This item is already added to the cart')
                        return
                  }
               }
               var cartRowContents = `
                  <div class="cart-item cart-column">
                        <img class="cart-item-image" src="${imageSrc}" width="100" height="100">
                        <span class="cart-item-title">${title}</span>
                  </div>
                  <span class="cart-price cart-column">${price}</span>
                  <div class="cart-quantity cart-column">
                        <input class="cart-quantity-input" type="number" value="1">
                        <button class="btn btn-danger" type="button">REMOVE</button>
                  </div>`
               cartRow.innerHTML = cartRowContents
               cartItems.append(cartRow)
               cartRow.getElementsByClassName('btn-danger')[0].addEventListener('click', removeCartItem)
               cartRow.getElementsByClassName('cart-quantity-input')[0].addEventListener('change', quantityChanged)
            }

            function updateCartTotal() {
               var cartItemContainer = document.getElementsByClassName('cart-items')[0]
               var cartRows = cartItemContainer.getElementsByClassName('cart-row')
               var total = 0
               for (var i = 0; i < cartRows.length; i++) {
                  var cartRow = cartRows[i]
                  var priceElement = cartRow.getElementsByClassName('cart-price')[0]
                  var quantityElement = cartRow.getElementsByClassName('cart-quantity-input')[0]
                  var price = parseFloat(priceElement.innerText.replace('$', ''))
                  var quantity = quantityElement.value
                  total = total + (price * quantity)
               }
               total = Math.round(total * 100) / 100
               document.getElementsByClassName('cart-total-price')[0].innerText = '$' + total
            }
       </script>
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/plugin.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <!-- javascript --> 
      <script src="js/owl.carousel.js"></script>
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
   </body>
</html>